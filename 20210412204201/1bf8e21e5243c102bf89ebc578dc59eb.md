+++
title = "Corne Chocolateで自作/分割キーボード入門しました"
date = 2021-04-12T11:42:01.173Z
tags = []
+++

[遊舎工房](https://yushakobo.jp)さんのサイトをながめていたら分割キーボードを試したくなったので自作キットを購入して組み立てました。
この記事は組み立てたキーボードで書いています。

## 自作キットの購入

見た目と薄さ、小ささでCorne Chocolateを選択しました。
MITライセンスで公開されているオープンソースの自作キーボードです。

[The Corne keyboard](https://github.com/foostan/crkbd)

自作キット、キースイッチ、キーキャップは遊舎工房さんで通販しました。

## 組み立て

注文後は楽しみすぎて[ビルドガイド](https://github.com/foostan/crkbd/blob/master/corne-chocolate/doc/buildguide_jp.md)を熟読します。

### 基板の表面を決めて目印をつける

基板はリバーシブルになっているので最初に表面を決めて目印にマスキングテープを貼っておきます。

![](3d501f0bd948f0e0d1c54073fba98752.jpg)

### ダイオード

ビルドガイドを見ながら向きに気をつけてはんだ付けしていきます。
初めての表面実装でした。

![](2089d2afb45c868c1a1423db1b3009d8.jpg)

### Pro Micro, OLEDモジュール, TRRSジャック

表面(ダイオードのない方)に実装していきます。

![](28399b8e4cd11e11ca93c60e0634d7a0.jpg)

### ファームウェアの書き込み

ここで一旦ファームウェアを書き込んで軽く動作確認します。
ビルドガイドのファームウェアの章を参考に書き込んでいきます。
ガイドではQMK Toolboxを使用していますが、私の環境はGentoo Linuxなのでavrdudeを使って書き込んでいきます。

```
emerge -a avrdude
```

ファームウェアをレポジトリからダウンロードし、書き込んでいきます。
初回に書き込む際に`programmer is not responding`というエラーが発生したのですが、ググった結果書き込む前にPro Microのリセットボタンを2連打すると書き込めました。

作業ディレクトリにファームウェアを用意し、下記のコマンドで書き込みます。
デバイス名とファイル名は適宜変更します。

```
avrdude -c avr109 -p m32u4 -U flash:w:crkbd_rev1_common_via.hex -P /dev/ttyACM0
```

### LED

ビルドガイドを見ながら向きに気をつけてはんだ付けしていきます。
このLEDの表面実装が一番難しいところらしく、ビビりながらやっていましたが大丈夫でした。

LEDは順番通りはんだ付けしていき、2~3個ずつ点灯することを確認していきました。
点灯しない場合は大抵はんだ付けがうまくいっていないだけなので、怪しい箇所を再度はんだ付けしていきました。

全てはんだ付けしたら再度動作確認します。

![](53b229ed4f3b372bb3f43285a2a7ca88.jpg)

### Chocスイッチ用のソケット

キースイッチ用のソケットをはんだ付けしていきます。
ここでくればもう安心です。

![](f74501520070f2c4a46c5d0f3650cd17.jpg)

### 完成

ボトムプレート、トッププレート、OLED用のカバーを組み付け、キースイッチを取り付けていきます。
キーキャップを取り付ける前に、この状態で念の為全てのキーが動作しているか確認します。

![](ffae0350d674ca29b8e258441f5a165e.jpg)

1つキーが動作していなかったので、またはんだ付けかと落ち込んでいたらキースイッチの端子が死んでいただけでした。

![](6d0aebc3d07d1b8f120a0fa4f14d3e27.jpg)

キーキャップを取り付けて完成です。
ここまで6時間ぐらいでした。

![](0dac285bf8de3a4664b6e662d7da2387.jpg)

### キーマップ

[VIA](https://caniusevia.com/)をインストールして設定していきます。
今回はとくにキーマップは設定せず、とりあえずデフォルトキーマップに慣れることからはじめました。
ただ、デフォルトだとF1~F12までのキーが設定されていないので注意です。

## 初めての分割キーボードの使用感

慣れるまで（まだ慣れてませんが）結構つらいです。
１日程である程度各キーの位置を把握できましたが、タイピング速度が出るのはしばらくかかるような気がします。
ただ、42キーなのでほとんど指を遠くまで動かさなくて良い+分割キーボードなので慣れればかなり快適になれると信じてやっていきます。
